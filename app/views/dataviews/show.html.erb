<h1 class="text-2xl mb-10"><%=@dataview.name %></h1>

<div class="flex flex-wrap">
  <% @dataview.dataviews_dataqueries.each do |dataviews_dataquery| %>
    <div class="p-4 resizable-item">
      <%= render partial: 'dataqueries/dataquery', locals: { dataquery: dataviews_dataquery.dataquery, dataviews_dataquery: dataviews_dataquery } %>
    </div>
  <% end %>

  <div class="p-4 resizable-item w-1/3">
    <%= turbo_frame_tag 'dataquery-form' do %>
      <%= form_with(url: dataview_create_dataquery_path(@dataview), id: 'add-dataquery-form', data: { controller: 'dataviews', action: 'turbo:submit-end->dataviews#createDataquery' }) do |f| %>
        <%= f.select :dataquery_id, options_from_collection_for_select(current_user.company.dataqueries, 'id', 'name'), prompt: 'Select a Dataquery' %>
        <%= f.button 'Add', class: 'bg-white shadow rounded-lg p-4 text-center' %>
      <% end %>
    <% end %>
  </div>
</div>
