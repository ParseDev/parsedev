<div class="w-full overflow-x-scroll">
  <% if result && !result.is_a?(String) && result.added_context.is_a?(Hash) && result.added_context.key?(:code) %>
    <code class="bg-gray-800 text-white p-3 rounded-md whitespace-pre-line block">
      <%= prompt.sanitized_code %>
    </code>
  <% elsif result.is_a?(String) %>
    <%= result %>
  <% else %>
    <p> Oops, it seems like something went wrong </p>
  <% end %>
</div>


<% -if result.present? && result.try(:answer).present? && result.answer.kind_of?(Array) %>
<div class="px-4 sm:px-6 lg:px-8">
  <div class="mt-8 flow-root">
    <%= render "shared/result_table", answer: result.answer, prompt: prompt, include_save_button: true, include_create_chart_button: true %>
  </div>
</div>

<% else %>
<div class="mt-10">
  <div class="p-3 rounded-md">
    Response
  </div>
 <pre class="bg-gray-800 text-white p-3 rounded-md whitespace-pre-line block">
  <code class="language-json">
    <%= result.try(:answer) || result %>
   
  </code>
</pre>

</div>

<% end %>



